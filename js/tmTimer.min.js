function getTime(){return(new Date).clearTime().addSeconds(counter).toString("H:mm:ss")}function btnStopClick(e){var t=$("#txtMember").val(),o=getTime();isStarted&&e&&addNewTime(t,$("#selectTimes").find(":selected").text(),o,lastColor),$("#btnPause").hide(),$("#btnPlay").show(),lastColor=bColors[selectedColor],document.body.style.backgroundColor=lastColor,$("#divCurrentTime").css("background-color",lastColor),$("#timeContent").css("background-color",lastColor),$("#pTime").text("0:00:00"),$("#txtMember").val(""),selected=-1,counter=1,isPaused=!0,isStarted=!1,0==selectedColor?($("#pTime,.lblFooter").css("color","black"),changeImages("-gray")):($("#pTime,.lblFooter").css("color","white"),changeImages("")),$("#selectTimes").prop("disabled",!1),$("#btnRestart").prop("disabled",!1)}function btnStartClick(){isStarted||(isStarted=!0,isPaused=!1,""!=(selected=$("#selectTimes").val())&&null!=selected&&(isCustom||(minimum=times[selected][0],average=times[selected][1],maximum=times[selected][2]),startTimer(),$("#selectTimes").prop("disabled","disabled"),$("#btnRestart").prop("disabled","disabled"),changeImages(0==selectedColor?"-gray":"")))}function btnPauseClick(){isPaused=!0}function startTimer(){var e=setInterval(function(){isPaused?clearInterval(e):($("#pTime").text(getTime()),counter>=minimum&&counter<average?(changeImages(""),lastColor="green",$("#pTime,.lblFooter").css("color","white")):counter>=average&&counter<maximum?(changeImages("-gray"),lastColor="yellow",$("#pTime,.lblFooter").css("color","black")):counter>=maximum?(changeImages(""),lastColor="red",$("#pTime,.lblFooter").css("color","white")):lastColor=bColors[selectedColor],document.body.style.backgroundColor=lastColor,$("#timeContent").css("background-color",lastColor),$("#divCurrentTime").css("background-color",lastColor),counter++)},1e3)}function changeImages(e){$("#btnPlay").attr("src","images/play"+e+".png"),$("#btnPause").attr("src","images/pause"+e+".png"),$("#btnStop").attr("src","images/stop"+e+".png"),!isPaused&&isStarted?($("#btnRestart").attr("src","images/restart"+e+"-dis.png"),$("#btnRestart").attr("title","You must stop the timer in order to restart.")):($("#btnRestart").attr("src","images/restart"+e+".png"),$("#btnRestart").attr("title","To restart and start from scratch (it doesn't store the speaker's time)")),$("#btnTable").attr("src","images/table"+e+".png"),$("#btnTimer").attr("src","images/timer"+e+".png"),$("#btnInvert").attr("src","images/invert-colors"+e+".png")}function changeImagesByColor(){changeImages(0!=selectedColor||"white"!=lastColor&&"yellow"!=lastColor?"":"-gray")}var counter=1,selected=-1,minimum=0,average=0,maximum=0,lastColor="white",isPaused=!1,isStarted=!1,isCustom=!1,bColors=["white","black"],selectedColor=0,times=[[10,20,30],[240,300,360],[300,360,420],[480,540,600],[60,75,90],[120,150,180],[300,330,360],[60,90,120],[600,660,720],[780,840,900],[1080,1170,1200]];$(function(){initializeDB(),$('[data-toggle="tooltip"]').tooltip(),$(".timing").timingfield(),$("#cTopic").html("<div><div style='float:left'><b>Meeting at "+(new Date).toString("dd/MM/yyyy")+'</b></div><div style="float:right"><a href="#divConfirm" data-toggle="modal" data-target="#divConfirm"><span class="glyphicon glyphicon-trash"></span></a></div></div>'),$("#selectTimes").select2({placeholder:"Choose a time"}).on("change",function(){"11"==$(this).val()?$("#divCustomTime").modal():isCustom=!1}),$("#linkResults").click(function(){countTimetable(),printTable(),$("#divResults").modal()}),$("#btnPlay").click(function(){var e=$("#selectTimes").val();if(""==e||null==e){var t=document.getElementById("snackbar");return t.className="show",void setTimeout(function(){t.className=t.className.replace("show","")},3e3)}isStarted=!1,btnStartClick(),$(this).hide(),$("#btnPause").show(),changeImagesByColor()}),$("#btnPause").click(function(){btnPauseClick(),$(this).hide(),$("#btnPlay").show(),changeImagesByColor()}),$("#btnStop").click(function(){btnStopClick(!0)}),$("#btnRestart").click(function(){btnStopClick(!1),isCustom=!1,minimum=0,average=0,maximum=0,$("#selectTimes").select2({placeholder:"Choose a time"}).val("").trigger("change")}),$("#btnSave").click(function(){var e=parseInt(360*$("input[type=text]")[2].value+60*$("input[type=text]")[3].value+$("input[type=text]")[4].value),t=parseInt(360*$("input[type=text]")[6].value+60*$("input[type=text]")[7].value+$("input[type=text]")[8].value),o=parseInt(360*$("input[type=text]")[10].value+60*$("input[type=text]")[11].value+$("input[type=text]")[12].value);e>=t?$("#pError").html("The minimum time cannot be greater or equal than the average time.<br/>"):e>=o?$("#pError").html("The minimum time cannot be greater or equal than the maximum time.<br/>"):t>=o?$("#pError").html("The average time cannot be greater or equal than the maximum time.<br/>"):(isCustom=!0,minimum=e,average=t,maximum=o,$("#divCustomTime").modal("toggle"))}),$("#btnInvert").click(function(){0==selectedColor?(selectedColor=1,changeImages(""),$("#pTime,.lblFooter").css("color","white")):(selectedColor=0,changeImages("-gray"),$("#pTime,.lblFooter").css("color","black")),lastColor=bColors[selectedColor],document.body.style.backgroundColor=lastColor,$("#timeContent").css("background-color",lastColor),$("#divCurrentTime").css("background-color",lastColor)}),$("#btnConfirm").click(function(e){e.preventDefault(),isStarted=!1,btnStopClick(!1),clearTimetable(),$("#hNoResults").show(),$("#tblResults").hide()}),$("[data-toggle]").click(function(){var e=this;setTimeout(function(){$(e).tooltip("hide")},3e3)})});