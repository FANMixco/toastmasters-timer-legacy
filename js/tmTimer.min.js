const DB_VERSION="2.0";var audioElement,audioElementClapping,counter=1,selected=-1,minimum=0,average=0,maximum=0,selectedColor=0,green=0,yellow=0,red=0,lastColor="white",isBeepEnabled="false",isVibrateEnabled="false",isStickEnabled="false",isClappingEnabled="false",latestDB="1.0",currentDB="1.0",isPaused=!1,isStarted=!1,isCustom=!1,isFirstTime=!1,multipleEnabled=!1,hasVibrator=!0,dateFormat="dd/MM/yyyy",bColors=["white","black"],countries=["US","FM","MH","PH"],supportsOrientationChange="onorientationchange"in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize",os=getMobileOperatingSystem();("iOS"==os||"Android"==os)&&$("#btnBeep,#btnClapping").hide();var times=[[10,20,30],[240,300,360],[300,360,420],[480,540,600],[60,75,90],[120,150,180],[300,330,360],[60,90,120],[600,660,720],[780,840,900],[1080,1170,1200]];function setDateFormat(){try{countries.includes(navigator.language.split("-")[1])&&(dateFormat="MM/dd/yyyy")}catch(a){isValueInArray(countries,navigator.language.split("-")[1])&&(dateFormat="MM/dd/yyyy")}}function setLocalStorage(a,b){null!==getLocalStorageValue(a)&&removeLocalStorage(a),localStorage.setItem(a,b)}function getLocalStorageValue(a){return localStorage.getItem(a)}function removeLocalStorage(a){localStorage.removeItem(a)}function getTimeStamp(a){return new Date().clearTime().addSeconds(a).toString("HH:mm:ss")}function getTime(){return getTimeStamp(counter)}function enableVibrator(){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&("iOS"==os||"Android"==os)?(hasVibrator=!0,$("#btnVibrate").show()):$("#btnVibrate").hide()}function setDbConf(){currentDB=getLocalStorageValue("currentDB"),(currentDB!==getLocalStorageValue("latestDB")||null===currentDB)&&(setLocalStorage("currentDB",DB_VERSION),setLocalStorage("latestDB",DB_VERSION),latestDB=DB_VERSION)}function verifyLastColor(){lastColor=counter>=minimum&&counter<average?"green":counter>=average&&counter<maximum?"yellow":counter>=maximum?"red":bColors[selectedColor]}function btnStopClick(a){stopClapping(),isStarted&&a&&(--counter,verifyLastColor(),addNewTime($("#txtMember").val(),$("#selectTimes").find(":selected").text(),getTimeStamp(minimum),getTimeStamp(average),getTimeStamp(maximum),getTime(),lastColor,counter>maximum+30||counter<minimum-30),showSnackBar(currentTranslation.recorded,!0)),$("#btnPause,#btnRestart").hide(),$("#btnPlay,#btnRestartBasic").show(),$("#innerTime").text("00:00:00"),$("#txtMember").val(""),$("#selectTimes,#btnRestartBasic").prop("disabled",!1),$(".externalLinks").removeClass("linkColG"),$(".externalLinks").removeClass("linkCol"),$(".externalLinks").removeClass("linkColY"),counter=1,isPaused=!0,isStarted=!1,green=0,yellow=0,red=0,setImgAndBng()}function startBeep(){"true"!==isBeepEnabled||"iOS"==os||"Android"==os||(1===green||1===yellow||1===red?(audioElement.play(),setTimeout(function(){audioElement.pause()},500)):audioElement.pause())}function startVibrate(){"true"===isVibrateEnabled&&(1===green||1===yellow||1===red)&&hasVibrator&&navigator.vibrate(1e3)}function getBeep(){null===localStorage.getItem("myBeep")?setBeep(isBeepEnabled):isBeepEnabled=localStorage.getItem("myBeep")}function isStick(){null===getLocalStorageValue("isStick")?$("#divStickMsg").modal():(isStickEnabled=getLocalStorageValue("isStick"),"true"===isStickEnabled&&($("#innerTime").show(),errorLng?setTimeout(function(){setTimer("timer-off")},150):setTimer("timer-off")))}function setTimer(a){0===selectedColor&&("white"===lastColor||"yellow"===lastColor)?$("#btnVisibleTimer").attr("src",`images/${a}-gray.png`):$("#btnVisibleTimer").attr("src",`images/${a}.png`)}function getVibrate(){null===getLocalStorageValue("myVibrate")?setVibrate(isVibrateEnabled):isVibrateEnabled=getLocalStorageValue("myVibrate")}function getClapping(){null===getLocalStorageValue("myClapping")?setClapping(isClappingEnabled):isClappingEnabled=getLocalStorageValue("myClapping")}function getCurrentColor(){null===getLocalStorageValue("myPreferedColor")?setColor(selectedColor):selectedColor=parseInt(getLocalStorageValue("myPreferedColor"))}function setBeep(a){setLocalStorage("myBeep",a)}function setVibrate(a){setLocalStorage("myVibrate",a)}function setClapping(a){setLocalStorage("myClapping",a)}function setColor(a){setLocalStorage("myPreferedColor",a)}function setSticky(a){setLocalStorage("isStick",a)}function btnStartClick(){isStarted||(isStarted=!0,isPaused=!1,selected=$("#selectTimes").val(),""===selected||null===selected||(!isCustom&&(minimum=times[selected][0],average=times[selected][1],maximum=times[selected][2]),startTimer(),$("#selectTimes,#btnRestart").prop("disabled","disabled"),0===selectedColor?changeImages("-gray"):changeImages("")))}function startTimer(){var a=!1;counter=counter||1;var b=setInterval(function(){isPaused?clearInterval(b):($("#innerTime").text(getTime()),counter>=minimum&&counter<average?(changeImages(""),lastColor="green",$("#innerTime,.lblFooter").css("color","white"),$(".externalLinks").addClass("linkColY"),green++,startBeep(),startVibrate()):counter>=average&&counter<maximum?(changeImages("-gray"),lastColor="yellow",$(".lblFooter").css("color","black"),$("#innerTime").css("color","#757575"),$(".externalLinks").removeClass("linkColY"),$(".externalLinks").addClass("linkCol"),yellow++,startBeep(),startVibrate()):counter>=maximum?(changeImages(""),lastColor="red",$("#innerTime,.lblFooter").css("color","white"),$(".externalLinks").removeClass("linkCol"),$(".externalLinks").addClass("linkColY"),red++,startBeep(),startVibrate()):($(".externalLinks").removeClass("linkCol"),$(".externalLinks").removeClass("linkColY"),lastColor=bColors[selectedColor]),counter>=maximum+30&&(!a&&startClapping(),a=!0),setBgnColor(),counter++)},1e3)}function startClapping(){"true"!==isClappingEnabled||"iOS"==os||"Android"==os||(audioElementClapping.play(),setTimeout(function(){audioElementClapping.pause()},1500))}function stopClapping(){"iOS"==os||"Android"==os||audioElementClapping.pause()}function changeImages(a){"true"===isStickEnabled?$("#btnVisibleTimer").attr("src",`images/timer-off${a}.png`):$("#btnVisibleTimer").attr("src",`images/timer${a}.png`),$("#btnPlay").attr("src",`images/play${a}.png`),$("#btnPause").attr("src",`images/pause${a}.png`),$("#btnStop").attr("src",`images/stop${a}.png`),!isPaused&&isStarted?setRestartBtnImg(a,"-dis",currentTranslation.titleRestart2):setRestartBtnImg(a,"",currentTranslation.titleRestart),$("#btnTable").attr("src",`images/table${a}.png`),$("#btnInvert").attr("src",`images/invert-colors${a}.png`),$("#imgModalInfo").attr("src",`images/info${a}.png`),setVolumeBtnImg(a),setVibrateBtnImg(a),setClappingBtnImg(a)}function setRestartBtnImg(a,b,c){$("#btnRestartBasic,#btnRestart").attr("src",`images/restart${a}${b}.png`),$("#btnRestartBasic").attr("title",c).tooltip("fixTitle")}function setVolumeBtnImg(a){"true"===isBeepEnabled?$("#btnBeep").attr("src",`images/volume${a}.png`):$("#btnBeep").attr("src",`images/volume-off${a}.png`)}function setVibrateBtnImg(a){"false"===isVibrateEnabled?$("#btnVibrate").attr("src",`images/vibrate-off${a}.png`):$("#btnVibrate").attr("src",`images/vibrate${a}.png`)}function setClappingBtnImg(a){"true"===isClappingEnabled?$("#btnClapping").attr("src",`images/clapping${a}.png`):$("#btnClapping").attr("src",`images/clapping-off${a}.png`)}function setVolumeImg(){setBeep(isBeepEnabled),0===selectedColor&&("white"===lastColor||"yellow"===lastColor)?setVolumeBtnImg("-gray"):setVolumeBtnImg("")}function setVibrateImg(){setVibrate(isVibrateEnabled),0===selectedColor&&("white"===lastColor||"yellow"===lastColor)?setVibrateBtnImg("-gray"):setVibrateBtnImg("")}function setClappingImg(){setClapping(isClappingEnabled),0===selectedColor&&("white"===lastColor||"yellow"===lastColor)?setClappingBtnImg("-gray"):setClappingBtnImg("")}function changeImagesByColor(){0===selectedColor&&("white"===lastColor||"yellow"===lastColor)?changeImages("-gray"):changeImages("")}function resizeDivImage(){$(".divImage,#tblControls,#tdMiddle").height($(window).height()-$(".bottom-footer").height()-$("#options").height())}function setBgnColor(){$("body,#timeContent,#divCurrentTime").css("background-color",lastColor)}function setImgAndBng(){1===selectedColor?(changeImages(""),$("#innerTime,.lblFooter").css("color","white")):(changeImages("-gray"),$(".lblFooter").css("color","black"),$("#innerTime").css("color","#757575")),setColor(selectedColor),lastColor=bColors[selectedColor],setBgnColor()}function setObjTranslations(){setTimeout(function(){$("#cTopic").html(`<b>${currentTranslation.meetingAt} ${new Date().toString("dd/MM/yyyy")}</b>`)},150),800<$(window).width()?($("head").append("<link href='css/select2.min.css' rel='stylesheet' />"),$.getScript("js/select2.min.js").done(function(){setTimeout(function(){$("#selectTimes").addClass("js-example-basic-single"),$("#selectTimes").select2({placeholder:currentTranslation.chooseTime})},150)})):($("#selectTimes").addClass("form-control"),setTimeout(function(){$("#emptyOption").text(currentTranslation.chooseTime)},150),$("#emptyOption").prop("disabled",!0),$("#emptyOption").attr("value",""))}function showSnackBar(a){$("#spanMsg").text(a);var b=document.getElementById("snackbar");b.className="show",setTimeout(function(){b.className=b.className.replace("show","")},3e3)}function resizeModal(){let a=$(window).height();$("#divContent").height()>$(window).height()?($("#divTable").height(.75*$(window).height()),$("#divTable").css("overflow-y","auto")):($("#divTable").css("height",""),$("#divTable").css("overflow-y","")),setTimeout(function(){$("#divContent").height()>a&&resizeModal()},50)}function btnPlay(){var a=$("#selectTimes").val();return""===a||null===a?void showSnackBar(currentTranslation.chooseSpeech,!0):(isCustom||"11"===a)&&0===minimum+average+maximum?void showSnackBar(currentTranslation.emptyCustom,!1):void(isStarted=!1,btnStartClick(),$("#btnPlay,#btnRestart").hide(),$("#btnPause,#btnRestartBasic").show(),changeImagesByColor())}function btnPause(){stopClapping(),isPaused=!0,$("#btnPause,#btnRestartBasic").hide(),$("#btnPlay,#btnRestart").show(),changeImagesByColor()}function setSelect2(a){800<$(window).width()?-1<a?$("#selectTimes").select2({placeholder:currentTranslation.chooseTime}).val(`${a}`).trigger("change"):$("#selectTimes").select2({placeholder:currentTranslation.chooseTime}).val("").trigger("change"):-1<a?$("#selectTimes").val(a):$("#selectTimes").val("")}function isStickFirstTime(a){setSticky(a),isStickEnabled=a,$("#divStickMsg").modal("toggle")}window.addEventListener(orientationEvent,function(){resizeDivImage()},!1),$(function(){function a(){var a=[];return $("input.chkDel[type=checkbox]").each(function(){this.checked&&a.push(parseInt($(this).attr("id").replace("chk","")))}),a}function b(){btnStopClick(!1),isCustom=!1,minimum=0,average=0,maximum=0,setSelect2(-1)}"iOS"==os||"Android"==os||(audioElement=document.createElement("audio"),audioElement.setAttribute("src","sounds/beep.mp3"),audioElement.addEventListener("ended",function(){this.play()},!1),audioElement.addEventListener("canplay",function(){}),audioElement.addEventListener("timeupdate",function(){}),audioElementClapping=document.createElement("audio"),audioElementClapping.setAttribute("src","sounds/clapping.mp3"),audioElementClapping.addEventListener("ended",function(){this.play()},!1),audioElementClapping.addEventListener("canplay",function(){}),audioElementClapping.addEventListener("timeupdate",function(){})),setDbConf(),$.fn.hideKeyboard=function(){var a=this.filter("input").attr("readonly","readonly");return setTimeout(function(){a.blur().removeAttr("readonly")},100),this},$("#btnDelete").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){multipleEnabled=!1,isStarted||(isStarted=!1,btnStopClick(isStarted)),clearTimetable(),showSnackBar(currentTranslation.deletedAgenda,!0),$("#hNoResults").show(),$("#tblResults,#footerResult").hide(),resizeModal()}}),$("#btnRestart").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){b()}}),$("#btnDeleteMultiple").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){var b=a();if(0<b.length){var c=deleteByIDs(b);isStarted||(isStarted=!1,btnStopClick(isStarted)),showSnackBar(currentTranslation.deletedRoles,!0),c.onsuccess=function(){0===c.result&&(multipleEnabled=!1,clearTimetable(),$("#hNoResults").show(),$("#tblResults,#footerResult").hide()),resizeModal()}}}}),setTimeout(function(){resizeDivImage()},50),$(".timing").timingfield(),$("[data-toggle='tooltip']").tooltip(),$("[data-toggle='tooltip']").on("hidden.bs.tooltip",function(){$(this).tooltip("disable")}),errorLng?setTimeout(function(){setObjTranslations()},150):setObjTranslations(),$("#selectTimes").on("change",function(){"11"===$(this).val()?$("#divCustomTime").modal():isCustom=!1}),$("#linkResults").click(function(a){a.preventDefault();let b=$("#selectTimes").val();multipleEnabled=!1,countTimetable(),printTable(),$("#btnDelete").show(),$("#btnDeleteMultiple,.tdDel,#thDel").hide(),$("#lblMultiple").text(currentTranslation.multiple),$("#icnMultiple").removeClass(),$("#icnMultiple").toggleClass("glyphicon glyphicon-check"),setSelect2(b),$("#divCustomTime").data("bs.modal")&&$("#divCustomTime").data("bs.modal").isShown&&$("#divCustomTime").modal("toggle")}),$("#btnClear").click(function(){let a="input[type=text]",b=[2,3,4,6,7,8,10,11,12];("iOS"==os||"Android"==os)&&(a="input[type=number]");for(let c=0;9>c;c++)$(a)[b[c]].value="0"}),$("#btnPlay").click(function(){btnPlay()}),$("#btnPause").click(function(){btnPause()}),$("#btnStop").click(function(){btnStopClick(!0)}),$("#btnBeep").click(function(){isBeepEnabled="true"===isBeepEnabled?"false":"true",setVolumeImg()}),$("#btnVibrate").click(function(){isVibrateEnabled="true"===isVibrateEnabled?"false":"true",setVibrateImg()}),$("#btnClapping").click(function(){"true"===isClappingEnabled?(isClappingEnabled="false",stopClapping()):isClappingEnabled="true",setClappingImg()}),$("#btnRestartBasic").click(function(){isStarted&&!isPaused||b()}),$("#btnRYes").click(function(){b()}),$("#btnSave").click(function(){var a="input[type=text]";("iOS"==os||"Android"==os)&&(a="input[type=number]");var b=parseInt(3600*$(a)[0].value)+parseInt(60*$(a)[1].value)+parseInt($(a)[2].value),c=parseInt(3600*$(a)[3].value)+parseInt(60*$(a)[4].value)+parseInt($(a)[5].value),d=parseInt(3600*$(a)[6].value)+parseInt(60*$(a)[7].value)+parseInt($(a)[8].value);b>=c?showSnackBar(currentTranslation.errorMin):b>=d?showSnackBar(currentTranslation.errorHalf):c>=d?showSnackBar(currentTranslation.errorMax):(isCustom=!0,minimum=b,average=c,maximum=d,$("#divCustomTime").modal("toggle"))}),$("#btnInvert").click(function(){selectedColor=0===selectedColor?1:0,setImgAndBng()}),$("[data-toggle]").click(function(){var a=this;setTimeout(function(){$(a).tooltip("hide")},1500)}),$("#linkDownload").click(function(){showSnackBar(currentTranslation.lblExportMsg),setTimeout(function(){var a=new jsPDF("l","pt","a4"),b=a.autoTableHtmlToJson(document.getElementById("tblResults"));a.autoTable(b.columns,b.data,{startY:60}),a.save()},250)}),$("#btnVisibleTimer").click(function(){"false"===isStickEnabled?(isStickEnabled="true",setSticky(isStickEnabled),$("#innerTime").show(),setTimer("timer-off")):(isStickEnabled="false",setSticky(isStickEnabled),$("#innerTime").hide(),setTimer("timer"))}),$("#btnStick").click(function(){isStickFirstTime("true"),$("#innerTime").show(),setTimer("timer-off")}),$("#btnUnstick").click(function(){isStickFirstTime("false")}),$("#btnMultiple").click(function(){multipleEnabled?($("#icnMultiple").toggleClass("glyphicon-unchecked").toggleClass("glyphicon-check"),$("#btnDelete").show(),$(".tdDel,#thDel,#btnDeleteMultiple").hide(),$("input:checkbox").prop("checked",!1)):($("#icnMultiple").toggleClass("glyphicon-check").toggleClass("glyphicon-unchecked"),$("#btnDelete").hide(),$(".tdDel,#thDel,#btnDeleteMultiple").show()),multipleEnabled=!multipleEnabled}),$("#txtMember,input[type=number]").on("keyup",function(a){13===a.keyCode&&$(this).hideKeyboard()}),$("#chkAll").change(function(){this.checked?$("input:checkbox").not(this).prop("checked",this.checked):$("input:checkbox").prop("checked",!1)}),getCurrentColor(),getBeep(),getVibrate(),getClapping(),setVolumeImg(),enableVibrator(),isStick(),setDateFormat(),initializeDB(currentDB,latestDB)});