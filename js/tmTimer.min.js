const DB_VERSION="2.0";var audioElement,audioElementClapping,counter=1,selected=-1,minimum=0,average=0,maximum=0,selectedColor=0,green=0,yellow=0,red=0,lastColor="white",isBeepEnabled="false",isVibrateEnabled="false",isStickEnabled="false",isClappingEnabled="false",latestDB="1.0",currentDB="1.0",isPaused=!1,isStarted=!1,isCustom=!1,isFirstTime=!1,multipleEnabled=!1,hasVibrator=!0,dateFormat="dd/MM/yyyy",bColors=["white","black"],countries=["US","FM","MH","PH"],supportsOrientationChange="onorientationchange"in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize",os=getMobileOperatingSystem();"iOS"!=os&&"Android"!=os||$("#btnBeep,#btnClapping").hide();const isDesktop=()=>{const e=navigator.userAgent||navigator.vendor||window.opera;return!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))};var times=[[10,20,30],[240,300,360],[300,360,420],[480,540,600],[60,75,90],[120,150,180],[300,330,360],[60,90,120],[600,660,720],[780,840,900],[1080,1170,1200]];function setDateFormat(){try{countries.includes(navigator.language.split("-")[1])&&(dateFormat="MM/dd/yyyy")}catch(e){isValueInArray(countries,navigator.language.split("-")[1])&&(dateFormat="MM/dd/yyyy")}}function setLocalStorage(e,t){null!==getLocalStorageValue(e)&&removeLocalStorage(e),localStorage.setItem(e,t)}function getLocalStorageValue(e){return localStorage.getItem(e)}function removeLocalStorage(e){localStorage.removeItem(e)}function getTimeStamp(e){return(new Date).clearTime().addSeconds(e).toString("HH:mm:ss")}function getTime(){return getTimeStamp(counter)}function enableVibrator(){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,!navigator.vibrate||"iOS"!=os&&"Android"!=os?$("#btnVibrate").hide():(hasVibrator=!0,$("#btnVibrate").show())}function setDbConf(){(currentDB=getLocalStorageValue("currentDB"))===getLocalStorageValue("latestDB")&&null!==currentDB||(setLocalStorage("currentDB",DB_VERSION),setLocalStorage("latestDB",DB_VERSION),latestDB=DB_VERSION)}function verifyLastColor(){lastColor=counter>=minimum&&counter<average?"green":counter>=average&&counter<maximum?"yellow":counter>=maximum?"red":bColors[selectedColor]}function btnStopClick(e){stopClapping(),isStarted&&e&&(counter-=1,verifyLastColor(),addNewTime($("#txtMember").val(),$("#selectTimes").find(":selected").text(),getTimeStamp(minimum),getTimeStamp(average),getTimeStamp(maximum),getTime(),lastColor,counter>maximum+30||counter<minimum-30),showSnackBar(currentTranslation.recorded,!0)),$("#btnPause,#btnRestart").hide(),$("#btnPlay,#btnRestartBasic").show(),$("#innerTime").text("00:00:00"),$("#txtMember").val(""),$("#selectTimes,#btnRestartBasic").prop("disabled",!1),$(".externalLinks").removeClass("linkColG"),$(".externalLinks").removeClass("linkCol"),$(".externalLinks").removeClass("linkColY"),counter=1,isPaused=!0,isStarted=!1,green=0,yellow=0,red=0,setImgAndBng()}function startBeep(){"true"===isBeepEnabled&&"iOS"!=os&&"Android"!=os&&(1===green||1===yellow||1===red?(audioElement.play(),setTimeout(function(){audioElement.pause()},500)):audioElement.pause())}function startVibrate(){"true"===isVibrateEnabled&&(1!==green&&1!==yellow&&1!==red||hasVibrator&&navigator.vibrate(1e3))}function getBeep(){null!==localStorage.getItem("myBeep")?isBeepEnabled=localStorage.getItem("myBeep"):setBeep(isBeepEnabled)}function isStick(){null===getLocalStorageValue("isStick")?$("#divStickMsg").modal():"true"===(isStickEnabled=getLocalStorageValue("isStick"))&&($("#innerTime").show(),errorLng?setTimeout(function(){setTimer("timer-off")},150):setTimer("timer-off"))}function setTimer(e){0!==selectedColor||"white"!==lastColor&&"yellow"!==lastColor?$("#btnVisibleTimer").attr("src",`images/${e}.png`):$("#btnVisibleTimer").attr("src",`images/${e}-gray.png`)}function getVibrate(){null!==getLocalStorageValue("myVibrate")?isVibrateEnabled=getLocalStorageValue("myVibrate"):setVibrate(isVibrateEnabled)}function getClapping(){null!==getLocalStorageValue("myClapping")?isClappingEnabled=getLocalStorageValue("myClapping"):setClapping(isClappingEnabled)}function getCurrentColor(){null!==getLocalStorageValue("myPreferedColor")?selectedColor=parseInt(getLocalStorageValue("myPreferedColor")):setColor(selectedColor)}function setBeep(e){setLocalStorage("myBeep",e)}function setVibrate(e){setLocalStorage("myVibrate",e)}function setClapping(e){setLocalStorage("myClapping",e)}function setColor(e){setLocalStorage("myPreferedColor",e)}function setSticky(e){setLocalStorage("isStick",e)}function btnStartClick(){isStarted||(isStarted=!0,isPaused=!1,""!==(selected=$("#selectTimes").val())&&null!==selected&&(isCustom||(minimum=times[selected][0],average=times[selected][1],maximum=times[selected][2]),startTimer(),$("#selectTimes,#btnRestart").prop("disabled","disabled"),changeImages(0===selectedColor?"-gray":"")))}function startTimer(){var e=!1;counter=counter||1;var t=setInterval(function(){isPaused?clearInterval(t):($("#innerTime").text(getTime()),counter>=minimum&&counter<average?(changeImages(""),lastColor="green",$("#innerTime,.lblFooter").css("color","white"),$(".externalLinks").addClass("linkColY"),green++,startBeep(),startVibrate()):counter>=average&&counter<maximum?(changeImages("-gray"),lastColor="yellow",$(".lblFooter").css("color","black"),$("#innerTime").css("color","#757575"),$(".externalLinks").removeClass("linkColY"),$(".externalLinks").addClass("linkCol"),yellow++,startBeep(),startVibrate()):counter>=maximum?(changeImages(""),lastColor="red",$("#innerTime,.lblFooter").css("color","white"),$(".externalLinks").removeClass("linkCol"),$(".externalLinks").addClass("linkColY"),red++,startBeep(),startVibrate()):($(".externalLinks").removeClass("linkCol"),$(".externalLinks").removeClass("linkColY"),lastColor=bColors[selectedColor]),counter>=maximum+30&&(e||startClapping(),e=!0),setBgnColor(),counter++)},1e3)}function startClapping(){"true"===isClappingEnabled&&"iOS"!=os&&"Android"!=os&&(audioElementClapping.play(),setTimeout(function(){audioElementClapping.pause()},1500))}function stopClapping(){"iOS"!=os&&"Android"!=os&&audioElementClapping.pause()}function changeImages(e){"true"===isStickEnabled?$("#btnVisibleTimer").attr("src",`images/timer-off${e}.png`):$("#btnVisibleTimer").attr("src",`images/timer${e}.png`),$("#btnPlay").attr("src",`images/play${e}.png`),$("#btnPause").attr("src",`images/pause${e}.png`),$("#btnStop").attr("src",`images/stop${e}.png`),!isPaused&&isStarted?setRestartBtnImg(e,"-dis",currentTranslation.titleRestart2):setRestartBtnImg(e,"",currentTranslation.titleRestart),$("#btnTable").attr("src",`images/table${e}.png`),$("#btnInvert").attr("src",`images/invert-colors${e}.png`),$("#imgModalInfo").attr("src",`images/info${e}.png`),setVolumeBtnImg(e),setVibrateBtnImg(e),setClappingBtnImg(e)}function setRestartBtnImg(e,t,i){$("#btnRestartBasic,#btnRestart").attr("src",`images/restart${e}${t}.png`),$("#btnRestartBasic").attr("title",i).tooltip("fixTitle")}function setVolumeBtnImg(e){"true"===isBeepEnabled?$("#btnBeep").attr("src",`images/volume${e}.png`):$("#btnBeep").attr("src",`images/volume-off${e}.png`)}function setVibrateBtnImg(e){"false"===isVibrateEnabled?$("#btnVibrate").attr("src",`images/vibrate-off${e}.png`):$("#btnVibrate").attr("src",`images/vibrate${e}.png`)}function setClappingBtnImg(e){"true"===isClappingEnabled?$("#btnClapping").attr("src",`images/clapping${e}.png`):$("#btnClapping").attr("src",`images/clapping-off${e}.png`)}function setVolumeImg(){setBeep(isBeepEnabled),setVolumeBtnImg(0!==selectedColor||"white"!==lastColor&&"yellow"!==lastColor?"":"-gray")}function setVibrateImg(){setVibrate(isVibrateEnabled),setVibrateBtnImg(0!==selectedColor||"white"!==lastColor&&"yellow"!==lastColor?"":"-gray")}function setClappingImg(){setClapping(isClappingEnabled),setClappingBtnImg(0!==selectedColor||"white"!==lastColor&&"yellow"!==lastColor?"":"-gray")}function changeImagesByColor(){changeImages(0!==selectedColor||"white"!==lastColor&&"yellow"!==lastColor?"":"-gray")}function resizeDivImage(){$(".divImage,#tblControls,#tdMiddle").height($(window).height()-$(".bottom-footer").height()-$("#options").height())}function setBgnColor(){$("body,#timeContent,#divCurrentTime").css("background-color",lastColor)}function setImgAndBng(){1===selectedColor?(changeImages(""),$("#innerTime,.lblFooter").css("color","white")):(changeImages("-gray"),$(".lblFooter").css("color","black"),$("#innerTime").css("color","#757575")),setColor(selectedColor),lastColor=bColors[selectedColor],setBgnColor()}function setObjTranslations(){setTimeout(function(){$("#cTopic").html(`<b>${currentTranslation.meetingAt} ${(new Date).toString("dd/MM/yyyy")}</b>`)},150),$(window).width()>800?($("head").append("<link href='css/select2.min.css' rel='stylesheet' />"),$.getScript("js/select2.min.js").done(function(){setTimeout(function(){$("#selectTimes").addClass("js-example-basic-single"),$("#selectTimes").select2({placeholder:currentTranslation.chooseTime})},150)})):($("#selectTimes").addClass("form-control"),setTimeout(function(){$("#emptyOption").text(currentTranslation.chooseTime)},150),$("#emptyOption").prop("disabled",!0),$("#emptyOption").attr("value",""))}function showSnackBar(e){$("#spanMsg").text(e);var t=document.getElementById("snackbar");t.className="show",setTimeout(function(){t.className=t.className.replace("show","")},3e3)}function resizeModal(){let e=$(window).height();$("#divContent").height()>$(window).height()?($("#divTable").height(.75*$(window).height()),$("#divTable").css("overflow-y","auto")):($("#divTable").css("height",""),$("#divTable").css("overflow-y","")),setTimeout(function(){$("#divContent").height()>e&&resizeModal()},50)}function btnPlay(){var e=$("#selectTimes").val();""!==e&&null!==e?!isCustom&&"11"!==e||minimum+average+maximum!==0?(isStarted=!1,btnStartClick(),$("#btnPlay,#btnRestart").hide(),$("#btnPause,#btnRestartBasic").show(),changeImagesByColor()):showSnackBar(currentTranslation.emptyCustom,!1):showSnackBar(currentTranslation.chooseSpeech,!0)}function btnPause(){stopClapping(),isPaused=!0,$("#btnPause,#btnRestartBasic").hide(),$("#btnPlay,#btnRestart").show(),changeImagesByColor()}function setSelect2(e){$(window).width()>800?e>-1?$("#selectTimes").select2({placeholder:currentTranslation.chooseTime}).val(`${e}`).trigger("change"):$("#selectTimes").select2({placeholder:currentTranslation.chooseTime}).val("").trigger("change"):e>-1?$("#selectTimes").val(e):$("#selectTimes").val("")}function isStickFirstTime(e){setSticky(e),isStickEnabled=e,$("#divStickMsg").modal("toggle")}window.addEventListener(orientationEvent,function(){resizeDivImage()},!1),$(function(){function e(){btnStopClick(!1),isCustom=!1,minimum=0,average=0,maximum=0,setSelect2(-1)}"iOS"!=os&&"Android"!=os&&((audioElement=document.createElement("audio")).setAttribute("src","sounds/beep.mp3"),audioElement.addEventListener("ended",function(){this.play()},!1),audioElement.addEventListener("canplay",function(){}),audioElement.addEventListener("timeupdate",function(){}),(audioElementClapping=document.createElement("audio")).setAttribute("src","sounds/clapping.mp3"),audioElementClapping.addEventListener("ended",function(){this.play()},!1),audioElementClapping.addEventListener("canplay",function(){}),audioElementClapping.addEventListener("timeupdate",function(){})),setDbConf(),$.fn.hideKeyboard=function(){var e=this.filter("input").attr("readonly","readonly");return setTimeout(function(){e.blur().removeAttr("readonly")},100),this},$("#btnDelete").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){multipleEnabled=!1,isStarted||btnStopClick(isStarted=!1),clearTimetable(),showSnackBar(currentTranslation.deletedAgenda,!0),$("#hNoResults").show(),$("#tblResults,#footerResult").hide(),resizeModal()}}),$("#btnRestart").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){e()}}),$("#btnDeleteMultiple").confirmation({rootSelector:"[data-toggle=confirmation]",popout:!0,onConfirm:function(){var e=function(){var e=[];return $("input.chkDel[type=checkbox]").each(function(){this.checked&&e.push(parseInt($(this).attr("id").replace("chk","")))}),e}();if(e.length>0){var t=deleteByIDs(e);isStarted||btnStopClick(isStarted=!1),showSnackBar(currentTranslation.deletedRoles,!0),t.onsuccess=function(){0===t.result&&(multipleEnabled=!1,clearTimetable(),$("#hNoResults").show(),$("#tblResults,#footerResult").hide()),resizeModal()}}}}),setTimeout(function(){resizeDivImage()},50),$(".timing").timingfield(),$("[data-toggle='tooltip']").tooltip(),$("[data-toggle='tooltip']").on("hidden.bs.tooltip",function(){$(this).tooltip("disable")}),errorLng?setTimeout(function(){setObjTranslations()},150):setObjTranslations(),$("#selectTimes").on("change",function(){"11"===$(this).val()?$("#divCustomTime").modal():isCustom=!1}),$("#linkResults").click(function(e){e.preventDefault();let t=$("#selectTimes").val();multipleEnabled=!1,countTimetable(),printTable(),$("#btnDelete").show(),$("#btnDeleteMultiple,.tdDel,#thDel").hide(),$("#lblMultiple").text(currentTranslation.multiple),$("#icnMultiple").removeClass(),$("#icnMultiple").toggleClass("glyphicon glyphicon-check"),setSelect2(t),$("#divCustomTime").data("bs.modal")&&$("#divCustomTime").data("bs.modal").isShown&&$("#divCustomTime").modal("toggle")}),$("#btnClear").click(function(){let e="input[type=text]",t=[2,3,4,6,7,8,10,11,12];"iOS"!=os&&"Android"!=os||(e="input[type=number]");for(let i=0;i<9;i++)$(e)[t[i]].value="0"}),$("#btnPlay").click(function(){btnPlay()}),$("#btnPause").click(function(){btnPause()}),$("#btnStop").click(function(){btnStopClick(!0)}),$("#btnBeep").click(function(){isBeepEnabled="true"===isBeepEnabled?"false":"true",setVolumeImg()}),$("#btnVibrate").click(function(){isVibrateEnabled="true"===isVibrateEnabled?"false":"true",setVibrateImg()}),$("#btnClapping").click(function(){"true"===isClappingEnabled?(isClappingEnabled="false",stopClapping()):isClappingEnabled="true",setClappingImg()}),$("#btnRestartBasic").click(function(){isStarted&&!isPaused||e()}),$("#btnRYes").click(function(){e()}),$("#btnSave").click(function(){var e="input[type=text]";"iOS"!=os&&"Android"!=os||(e="input[type=number]");var t=parseInt(3600*$(e)[0].value)+parseInt(60*$(e)[1].value)+parseInt($(e)[2].value),i=parseInt(3600*$(e)[3].value)+parseInt(60*$(e)[4].value)+parseInt($(e)[5].value),n=parseInt(3600*$(e)[6].value)+parseInt(60*$(e)[7].value)+parseInt($(e)[8].value);t>=i?showSnackBar(currentTranslation.errorMin):t>=n?showSnackBar(currentTranslation.errorHalf):i>=n?showSnackBar(currentTranslation.errorMax):(isCustom=!0,minimum=t,average=i,maximum=n,$("#divCustomTime").modal("toggle"))}),$("#btnInvert").click(function(){selectedColor=0===selectedColor?1:0,setImgAndBng()}),$("[data-toggle]").click(function(){var e=this;setTimeout(function(){$(e).tooltip("hide")},1500)}),$("#linkDownload").click(function(e){showSnackBar(currentTranslation.lblExportMsg),setTimeout(function(){var e=new jsPDF("l","pt","a4"),t=e.autoTableHtmlToJson(document.getElementById("tblResults"));e.autoTable(t.columns,t.data,{startY:60}),e.save()},250)}),$("#btnVisibleTimer").click(function(){"false"===isStickEnabled?(setSticky(isStickEnabled="true"),$("#innerTime").show(),setTimer("timer-off")):(setSticky(isStickEnabled="false"),$("#innerTime").hide(),setTimer("timer"))}),$("#btnStick").click(function(){isStickFirstTime("true"),$("#innerTime").show(),setTimer("timer-off")}),$("#btnUnstick").click(function(){isStickFirstTime("false")}),$("#btnMultiple").click(function(){multipleEnabled?($("#icnMultiple").toggleClass("glyphicon-unchecked").toggleClass("glyphicon-check"),$("#btnDelete").show(),$(".tdDel,#thDel,#btnDeleteMultiple").hide(),$("input:checkbox").prop("checked",!1)):($("#icnMultiple").toggleClass("glyphicon-check").toggleClass("glyphicon-unchecked"),$("#btnDelete").hide(),$(".tdDel,#thDel,#btnDeleteMultiple").show()),multipleEnabled=!multipleEnabled}),$("#txtMember,input[type=number]").on("keyup",function(e){13===e.keyCode&&$(this).hideKeyboard()}),$("#chkAll").change(function(){this.checked?$("input:checkbox").not(this).prop("checked",this.checked):$("input:checkbox").prop("checked",!1)}),getCurrentColor(),getBeep(),getVibrate(),getClapping(),setVolumeImg(),enableVibrator(),isStick(),setDateFormat(),initializeDB(currentDB,latestDB),setTimeout(function(){isDesktop()&&$(".select2").width("200")},1e3)});