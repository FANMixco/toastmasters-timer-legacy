$(function(){var a=function(c,d){this.elem=$(c),this.disabled=!1,this.settings=$.extend({},$.fn.timingfield.defaults,d),this.tpl=$($.fn.timingfield.template),this.init()};a.prototype={init:function(){this.elem.after(this.tpl),this.elem.hide();var c=0;this.elem.is(':disabled')&&this.disable(),0>=this.elem.val().length&&(86399<this.settings.value&&(this.settings.value=86399),this.elem.val(this.settings.value)),this.getHours().value=this.tsToHours(this.elem.val()),this.getMinutes().value=this.tsToMinutes(this.elem.val()),this.getSeconds().value=this.tsToSeconds(this.elem.val()),this.tpl.width(this.settings.width),this.tpl.find('.timingfield_hours   .input-group-addon').text(this.settings.hoursText),this.tpl.find('.timingfield_minutes .input-group-addon').text(this.settings.minutesText),this.tpl.find('.timingfield_seconds .input-group-addon').text(this.settings.secondsText);var d=$.proxy(this.upHour,this);this.tpl.find('.timingfield_hours .timingfield_next').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(d,100),!1});var f=$.proxy(this.downHour,this);this.tpl.find('.timingfield_hours .timingfield_prev').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(f,100),!1});var g=$.proxy(this.upMin,this);this.tpl.find('.timingfield_minutes .timingfield_next').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(g,100),!1});var i=$.proxy(this.downMin,this);this.tpl.find('.timingfield_minutes .timingfield_prev').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(i,100),!1});var j=$.proxy(this.upSec,this);this.tpl.find('.timingfield_seconds .timingfield_next').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(j,100),!1});var k=$.proxy(this.downSec,this);this.tpl.find('.timingfield_seconds .timingfield_prev').on('mouseup touchend',function(){return clearInterval(c),!1}).on('mousedown touchstart',function(){return c=setInterval(k,100),!1}),this.tpl.find('.timingfield_hours   input').on('keyup',$.proxy(this.inputHour,this)),this.tpl.find('.timingfield_minutes input').on('keyup',$.proxy(this.inputMin,this)),this.tpl.find('.timingfield_seconds input').on('keyup',$.proxy(this.inputSec,this)),this.elem.on('change',$.proxy(this.change,this)),$('.time-field').keydown(function(l){-1!==$.inArray(l.keyCode,[46,8,9,27,13,110,190])||65==l.keyCode&&(!0===l.ctrlKey||!0===l.metaKey)||67==l.keyCode&&(!0===l.ctrlKey||!0===l.metaKey)||88==l.keyCode&&(!0===l.ctrlKey||!0===l.metaKey)||35<=l.keyCode&&39>=l.keyCode||(l.shiftKey||48>l.keyCode||57<l.keyCode)&&(96>l.keyCode||105<l.keyCode)&&l.preventDefault()})},getHours:function(){return this.tpl.find('.timingfield_hours input')[0]},getMinutes:function(){return this.tpl.find('.timingfield_minutes input')[0]},getSeconds:function(){return this.tpl.find('.timingfield_seconds input')[0]},tsToHours:function(c){return parseInt(c/3600)},tsToMinutes:function(c){return parseInt(c%3600/60)},tsToSeconds:function(c){return parseInt(c%3600%60)},hmsToTimestamp:function(c,d,f){return 3600*parseInt(c)+60*parseInt(d)+parseInt(f)},updateElem:function(){this.elem.val(this.hmsToTimestamp(this.getHours().value,this.getMinutes().value,this.getSeconds().value)).trigger('change')},upHour:function(){return!this.disabled&&23>this.getHours().value&&(this.getHours().value=parseInt(this.getHours().value)+1,this.updateElem(),!0)},downHour:function(){return!this.disabled&&0<this.getHours().value&&(this.getHours().value=parseInt(this.getHours().value)-1,this.updateElem(),!0)},inputHour:function(){this.disabled||(0>this.getHours().value?this.getHours().value=0:23<this.getHours().value&&(this.getHours().value=23)),this.updateElem()},upMin:function(){if(!this.disabled){if(59>this.getMinutes().value)return this.getMinutes().value=parseInt(this.getMinutes().value)+this.settings.minutesInterval,59<this.getMinutes().value&&this.upHour()?(this.getMinutes().value=0,this.updateElem(),!0):(59<this.getMinutes().value&&(this.getMinutes().value=59),this.updateElem(),!0);if(this.upHour())return this.getMinutes().value=0,this.updateElem(),!0}return!1},downMin:function(){if(!this.disabled){if(0<this.getMinutes().value)return this.getMinutes().value=parseInt(this.getMinutes().value)-this.settings.minutesInterval,this.updateElem(),!0;if(this.downHour())return this.getMinutes().value=60-this.settings.minutesInterval,this.updateElem(),!0}return!1},inputMin:function(){this.disabled||(0>this.getMinutes().value?this.getMinutes().value=0:59<this.getMinutes().value&&(this.getMinutes().value=59),this.updateElem())},upSec:function(){if(!this.disabled){if(59>this.getSeconds().value)return this.getSeconds().value=parseInt(this.getSeconds().value)+1,this.updateElem(),!0;if(this.upMin())return this.getSeconds().value=0,this.updateElem(),!0}return!1},downSec:function(){if(!this.disabled){if(0<this.getSeconds().value)return this.getSeconds().value=parseInt(this.getSeconds().value)-1,this.updateElem(),!0;if(this.downMin())return this.getSeconds().value=59,this.updateElem(),!0}return!1},inputSec:function(){this.disabled||(0>this.getSeconds().value?this.getSeconds().value=0:59<this.getSeconds().value&&(this.getSeconds().value=59),this.updateElem())},disable:function(){this.disabled=!0,this.tpl.find('input:text').prop('disabled',!0)},enable:function(){this.disabled=!1,this.tpl.find('input:text').prop('disabled',!1)},change:function(){this.elem.is(':disabled')?this.disable():this.enable()}},$.fn.timingfield=function(c){return this.each(function(){var d=$(this);if(!d.data('timingfield')){var f=new a(this,c);d.data('timingfield',f)}})},$.fn.timingfield.defaults={width:263,hoursText:'H',minutesText:'M',secondsText:'S',minutesInterval:1,value:0};var b=getMobileOperatingSystem();'iOS'==b||'Android'==b?($.fn.timingfield.template=`<div class="timingfield">
		<div class="timingfield_hours">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<div class="input-group">
				<input type="number" min="0" max="23" class="form-control" maxlength="2" />
				<span class="input-group-addon"></span>
			</div>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
		<div class="timingfield_minutes">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<span class="input-group">
				<input type="number" min="0" max="59" class="form-control" maxlength="2" />
				<span class="input-group-addon"></span>
			</span>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
		<div class="timingfield_seconds">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<span class="input-group">
				<input type="number" min="0" max="59" class="form-control" maxlength="2" />
				<span class="input-group-addon"></span>
			</span>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
        </div>`,$.fn.hideKeyboard=function(){var c=this.filter('input').attr('readonly','readonly');return setTimeout(function(){c.blur().removeAttr('readonly')},100),this},$('input[type=number]').on('keyup',function(c){13===c.keyCode&&$(this).hideKeyboard()})):$.fn.timingfield.template=`<div class="timingfield">
		<div class="timingfield_hours">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<div class="input-group">
				<input type="text" class="form-control time-field" maxlength="2" />
				<span class="input-group-addon"></span>
			</div>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
		<div class="timingfield_minutes">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<span class="input-group">
				<input type="text" class="form-control time-field" maxlength="2" />
				<span class="input-group-addon"></span>
			</span>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
		<div class="timingfield_seconds">
			<button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></button>
			<span class="input-group">
				<input type="text" class="form-control time-field" maxlength="2" />
				<span class="input-group-addon"></span>
			</span>
			<button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></button>
		</div>
	</div>`});
